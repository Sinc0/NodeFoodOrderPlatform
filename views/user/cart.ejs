<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= pageTitle %></title>
    <link rel="shortcut icon" href="/pics/pizza-slice-single-transparent.png" type="image/x-icon">
    <link rel="stylesheet" href="/css/main.css">
</head>
<body>
    <!-- admin view -->
    <% if(admin == true) { %>
        <%- include('../snippets/html_nav_menu_admin.ejs') %>
    
    <!-- logged in user view -->
    <% } else if(loggedIn == true) { %>
        <%- include('../snippets/html_nav_menu_logged_in.ejs') %>
    
    <!-- anonmymous view -->
    <% } else { %>
        <%- include('../snippets/html_nav_menu_anon.ejs') %>
    <% } %>

    <main>
        <% let totalPrice = 0 %>
        <% if (cartProducts != null) { %>
        <div class="grid">
        <% for (let product of cartProducts) { %>
            <% totalPrice += (parseFloat(product.price) * product.quantity) %>
            <article class="card product-item">
                <header class="card__header">
                    <h1 class="product__title"><%= product.title %></h1>
                </header>                
               
                <div class="card__content">
                    <p class="product__price">quantity: <%= product.quantity %></p>
                    <p class="product__price">price: $<%= product.price %></p>
                    <p class="product__description">description: <%= product.description %></p>
                </div>
            </article>
        <% } %>
        <br/>
        <h2>Total Price: <%= totalPrice.toFixed(2) %></h2>
        </div>
        <div class="card__actions">
            <form action="/order-post" method="POST">
                <button class="btn" type="submit">Submit Order</button>
            </form>
        </div>
    <% } else { %>
        <h1> No products found</h1>
    <% } %>
    </main>



</body>
</html>